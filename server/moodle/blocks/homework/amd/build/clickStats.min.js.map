{"version":3,"file":"clickStats.min.js","sources":["../src/clickStats.js"],"sourcesContent":["import $ from 'jquery';\nimport Ajax from 'core/ajax';\nimport MyModal from 'block_homework/modals';\n\n/**\n * homework/amd/src/clickStats.js\n *\n * @package\n * @copyright 2024, cs-24-sw-5-01 <cs-24-sw-5-01@student.aau.dk>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n *\n */\n\n/**\n * Fetches and initializes the completion modal for the homework module that was clicked on.\n * @param stats Array of stats info.\n * @returns {Promise<void>} A promise that, when fulfilled, opens the modal\n */\nexport const init = async(stats) => {\n    // Create the modal using block_homework_get_stats_modal\n    $(document).ready(function() {\n        $('.stats-btn').on('click', () => {\n            Ajax.call([{\n                methodname: 'block_homework_get_stats_modal',\n                args: {'stats': stats},\n                done: async function(response) {\n                    const modal = await MyModal.create({\n                        title: \"Your homework stats\",\n                        body: `${response.html}`,\n                        large: true,\n                        removeOnClose: true,\n                    });\n\n                    // Show the modal.\n                    await modal.show();\n\n                    // Attach event listeners for buttons\n                    modal.getRoot().on('click', '[data-action=\"submit\"]', (e) => {\n                        e.preventDefault();\n                        modal.destroy();\n                    });\n\n                    modal.getRoot().on('click', '[data-action=\"cancel\"]', (e) => {\n                        e.preventDefault();\n                        modal.destroy();\n                    });\n                },\n                fail: (error) => {\n                    throw new Error(`Failed to load info homework content: ${JSON.stringify(error)}`);\n                }\n            }]);\n        });\n    });\n};"],"names":["_interopRequireDefault","e","__esModule","default","_jquery","_ajax","_modals","_exports","init","async","$","document","ready","on","Ajax","call","methodname","args","stats","done","response","modal","MyModal","create","title","body","html","large","removeOnClose","show","getRoot","preventDefault","destroy","fail","error","Error","JSON","stringify"],"mappings":"sIAE4C,SAAAA,uBAAAC,GAAAA,OAAAA,GAAAA,EAAAC,WAAAD,EAAAE,CAAAA,QAAAF,EAAA;;;;;;;;kFAF5CG,QAAAJ,uBAAAI,SACAC,MAAAL,uBAAAK,OACAC,QAAAN,uBAAAM,SAmDEC,SAAAC,KAnCkBC,eAEhB,EAAAC,iBAAEC,UAAUC,OAAM,YACd,EAAAF,QAAAA,SAAE,cAAcG,GAAG,SAAS,KACxBC,MAAIX,QAACY,KAAK,CAAC,CACPC,WAAY,iCACZC,KAAM,CAACC,MAASA,OAChBC,KAAMV,eAAeW,UACjB,MAAMC,YAAcC,QAAOnB,QAACoB,OAAO,CAC/BC,MAAO,sBACPC,KAAM,GAAGL,SAASM,OAClBC,OAAO,EACPC,eAAe,UAIbP,MAAMQ,OAGZR,MAAMS,UAAUjB,GAAG,QAAS,0BAA2BZ,IACnDA,EAAE8B,iBACFV,MAAMW,SAAS,IAGnBX,MAAMS,UAAUjB,GAAG,QAAS,0BAA2BZ,IACnDA,EAAE8B,iBACFV,MAAMW,SAAS,GAEtB,EACDC,KAAOC,QACH,MAAM,IAAIC,MAAM,yCAAyCC,KAAKC,UAAUH,SAAS,IAEtF,GAEX,GAAE,CACJ"}