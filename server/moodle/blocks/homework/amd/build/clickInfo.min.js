define("block_homework/clickInfo",["exports","jquery","core/ajax","block_homework/modals"],(function(_exports,_jquery,_ajax,_modals){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}
/**
   * homework/amd/src/modal_homework.js
   *
   * @package
   * @copyright 2024, cs-24-sw-5-01 <cs-24-sw-5-01@student.aau.dk>
   * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   *
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_ajax=_interopRequireDefault(_ajax),_modals=_interopRequireDefault(_modals);_exports.init=async(userID,readingspeed)=>{(0,_jquery.default)(document).ready((function(){(0,_jquery.default)(".timebutton").on("click",(e=>{_ajax.default.call([{methodname:"block_homework_get_infohomework_modal",args:{homeworkID:e.target.id,readingspeed:readingspeed},done:async function(response){const modal=await _modals.default.create({title:"<a href='"+response.courseurl+"'>"+response.course+"</a>: <a href='"+response.homeworkurl+"'>"+response.title+"</a> | "+response.duedate,body:`${response.html}`,large:!0,removeOnClose:!0});await modal.show(),modal.getRoot().on("click",'[data-action="submit"]',(e=>{e.preventDefault(),handleFormSubmit(userID,modal)})),modal.getRoot().on("click",'[data-action="cancel"]',(e=>{e.preventDefault(),modal.destroy()}))},fail:error=>{throw new Error(`Failed to load info homework content: ${JSON.stringify(error)}`)}}])}))}))};const handleFormSubmit=(userID,modal)=>{let literatureInputFields=document.querySelectorAll(".homework-time-literature"),linksInputFields=document.querySelectorAll(".homework-time-links"),videosInputFields=document.querySelectorAll(".homework-time-videos"),timeData=[];for(let inputField of literatureInputFields)""!==inputField.value&&timeData.push({id:inputField.id,time:inputField.value});for(let inputField of linksInputFields)""!==inputField.value&&timeData.push({id:inputField.id,time:inputField.value});for(let inputField of videosInputFields)""!==inputField.value&&timeData.push({id:inputField.id,time:inputField.value});timeData.length?_ajax.default.call([{methodname:"block_homework_save_homeworktime",args:{user:userID,timeCompleted:timeData},done:function(){modal.destroy(),location.reload()},fail:function(error){console.error("Failed to save data:",error)}}]):modal.destroy()}}));

//# sourceMappingURL=clickInfo.min.js.map